name: Apply BIG-IP config
on: [push]
jobs:
  Explore-GitHub-Actions:
    runs-on: self-hosted
    steps:
      - name: Check out repository code
        uses: actions/checkout@v3
      # - name: Apply AFM firewall rules via AS3
      #   run: |
      #     ansible-playbook -i inventory/inventory.ini deploy-firewall-policies-as3.yaml --limit bigip01
      # - name: Apply AFM firewall rules via f5-modules
      #   run: |
      #     ansible-playbook -i inventory/inventory.ini deploy-firewall-policies.yaml --limit bigip01
      - name: Deploy VS with WAF attached via AS3
        run: |
          ansible-playbook -i inventory/inventory.ini deploy-app-with-waf-as3.yaml --limit bigip02
